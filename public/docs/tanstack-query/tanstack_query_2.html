<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TanStack Query ê°€ì´ë“œ ëª¨ìŒ - í•œê¸€ ë²ˆì—­</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', 'Malgun Gothic', Tahoma, Geneva, Verdana, sans-serif; 
            background: #f5f5f5; 
            padding: 20px; 
            line-height: 1.8;
        }
        .container { 
            max-width: 1000px; 
            margin: 0 auto; 
            background: white; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.1); 
            border-radius: 8px; 
            overflow: hidden; 
        }
        .header { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            color: white; 
            padding: 50px 40px; 
            text-align: center; 
        }
        .header h1 { font-size: 2.8em; margin-bottom: 15px; font-weight: 700; }
        .header p { font-size: 1.2em; opacity: 0.95; }
        .content { padding: 50px 40px; color: #333; }
        
        .nav-section {
            background: #f8f9fa;
            padding: 30px;
            margin-bottom: 40px;
            border-radius: 8px;
            border-left: 5px solid #667eea;
        }
        .nav-section h3 {
            font-size: 1.4em;
            color: #2c3e50;
            margin-bottom: 15px;
        }
        .nav-list {
            list-style: none;
            padding: 0;
        }
        .nav-list li {
            margin: 10px 0;
        }
        .nav-list a {
            color: #667eea;
            text-decoration: none;
            font-size: 1.1em;
            font-weight: 500;
            transition: all 0.3s;
        }
        .nav-list a:hover {
            color: #764ba2;
            padding-left: 10px;
        }
        
        .section { 
            margin-bottom: 60px; 
            padding-bottom: 60px;
            border-bottom: 2px solid #e9ecef;
        }
        .section:last-child {
            border-bottom: none;
        }
        h2 { 
            font-size: 2.2em; 
            color: #2c3e50; 
            margin-bottom: 25px; 
            padding-bottom: 15px;
            border-bottom: 4px solid #667eea;
        }
        h3 { 
            font-size: 1.6em; 
            color: #34495e; 
            margin: 30px 0 20px 0; 
        }
        h4 {
            font-size: 1.3em;
            color: #495057;
            margin: 25px 0 15px 0;
        }
        p { 
            margin-bottom: 18px; 
            font-size: 1.05em; 
            text-align: justify;
            color: #444;
        }
        .code-block { 
            background: #f8f9fa; 
            border-left: 5px solid #667eea; 
            padding: 20px; 
            margin: 20px 0; 
            border-radius: 6px; 
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace; 
            font-size: 0.9em; 
            overflow-x: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .code-block pre { 
            margin: 0; 
            white-space: pre; 
            color: #212529;
        }
        .highlight { 
            background: #fff3cd; 
            padding: 20px; 
            border-radius: 6px; 
            border-left: 5px solid #ffc107; 
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .highlight strong {
            color: #856404;
        }
        .info-box {
            background: #d1ecf1;
            border-left: 5px solid #17a2b8;
            padding: 20px;
            margin: 20px 0;
            border-radius: 6px;
        }
        .info-box strong {
            color: #0c5460;
        }
        .warning-box {
            background: #f8d7da;
            border-left: 5px solid #dc3545;
            padding: 20px;
            margin: 20px 0;
            border-radius: 6px;
        }
        .warning-box strong {
            color: #721c24;
        }
        .feature-list { 
            list-style: none; 
            padding-left: 0; 
            margin: 20px 0; 
        }
        .feature-list li { 
            padding: 12px 0 12px 35px; 
            position: relative;
            font-size: 1.05em;
        }
        .feature-list li:before { 
            content: "âœ“"; 
            position: absolute; 
            left: 0; 
            color: #667eea; 
            font-weight: bold; 
            font-size: 1.3em; 
        }
        .footer { 
            background: #f8f9fa; 
            padding: 40px; 
            border-top: 2px solid #dee2e6; 
            text-align: center; 
            color: #666; 
            font-size: 0.95em; 
        }
        .footer p {
            margin: 8px 0;
        }
        .footer a {
            color: #667eea;
            text-decoration: none;
        }
        .footer a:hover {
            text-decoration: underline;
        }
        @media (max-width: 768px) { 
            .header h1 { font-size: 2em; } 
            .content { padding: 30px 20px; }
            h2 { font-size: 1.8em; }
            h3 { font-size: 1.4em; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>TanStack Query ê°€ì´ë“œ ëª¨ìŒ</h1>
            <p>React Query í•µì‹¬ ê¸°ëŠ¥ ì™„ë²½ ê°€ì´ë“œ</p>
        </div>
        
        <div class="content">
            <div class="nav-section">
                <h3>ğŸ“š ëª©ì°¨</h3>
                <ul class="nav-list">
                    <li><a href="#parallel-queries">1. ë³‘ë ¬ ì¿¼ë¦¬ (Parallel Queries)</a></li>
                    <li><a href="#dependent-queries">2. ì¢…ì† ì¿¼ë¦¬ (Dependent Queries)</a></li>
                    <li><a href="#background-fetching">3. ë°±ê·¸ë¼ìš´ë“œ í˜ì¹­ ì¸ë””ì¼€ì´í„°</a></li>
                    <li><a href="#window-focus">4. ìœˆë„ìš° í¬ì»¤ìŠ¤ ë¦¬í˜ì¹­</a></li>
                    <li><a href="#disabling-queries">5. ì¿¼ë¦¬ ë¹„í™œì„±í™”/ì¼ì‹œì •ì§€</a></li>
                    <li><a href="#query-retries">6. ì¿¼ë¦¬ ì¬ì‹œë„</a></li>
                </ul>
            </div>

            <!-- Section 1: Parallel Queries -->
            <div class="section" id="parallel-queries">
                <h2>1. ë³‘ë ¬ ì¿¼ë¦¬ (Parallel Queries)</h2>
                
                <p>"ë³‘ë ¬" ì¿¼ë¦¬ëŠ” í˜ì¹­ ë™ì‹œì„±ì„ ìµœëŒ€í™”í•˜ê¸° ìœ„í•´ ë™ì‹œì— ì‹¤í–‰ë˜ëŠ” ì¿¼ë¦¬ë¥¼ ë§í•©ë‹ˆë‹¤.</p>

                <h3>ë™ì ì´ì§€ ì•Šì€ ë³‘ë ¬ ì¿¼ë¦¬</h3>
                
                <p>ë³‘ë ¬ ì¿¼ë¦¬ì˜ ê°œìˆ˜ê°€ ë³€í•˜ì§€ ì•ŠëŠ” ê²½ìš°, ë³‘ë ¬ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ íŠ¹ë³„í•œ ë…¸ë ¥ì´ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. TanStack Queryì˜ useQueryì™€ useInfiniteQuery í›…ì„ ì›í•˜ëŠ” ë§Œí¼ ë‚˜ë€íˆ ì‚¬ìš©í•˜ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤!</p>

                <div class="code-block">
                    <pre>function App () {
  // ë‹¤ìŒ ì¿¼ë¦¬ë“¤ì€ ë³‘ë ¬ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤
  const usersQuery = useQuery({ queryKey: ['users'], queryFn: fetchUsers })
  const teamsQuery = useQuery({ queryKey: ['teams'], queryFn: fetchTeams })
  const projectsQuery = useQuery({ queryKey: ['projects'], queryFn: fetchProjects })
  ...
}</pre>
                </div>

                <div class="info-box">
                    <strong>ğŸ’¡ Suspense ëª¨ë“œ ì‚¬ìš© ì‹œ:</strong>
                    <p>React Queryë¥¼ suspense ëª¨ë“œì—ì„œ ì‚¬ìš©í•  ë•ŒëŠ” ì´ëŸ° ë³‘ë ¬ ì²˜ë¦¬ íŒ¨í„´ì´ ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ ì¿¼ë¦¬ê°€ ë‚´ë¶€ì ìœ¼ë¡œ promiseë¥¼ ë˜ì§€ê³  ë‹¤ë¥¸ ì¿¼ë¦¬ë“¤ì´ ì‹¤í–‰ë˜ê¸° ì „ì— ì»´í¬ë„ŒíŠ¸ë¥¼ ì¼ì‹œ ì¤‘ë‹¨ì‹œí‚¤ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ë ¤ë©´ useSuspenseQueries í›…ì„ ì‚¬ìš©í•˜ê±°ë‚˜(ê¶Œì¥), ê° useSuspenseQuery ì¸ìŠ¤í„´ìŠ¤ë§ˆë‹¤ ë³„ë„ì˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë³‘ë ¬ ì²˜ë¦¬ë¥¼ ì§ì ‘ ì¡°ìœ¨í•´ì•¼ í•©ë‹ˆë‹¤.</p>
                </div>

                <h3>ë™ì  ë³‘ë ¬ ì¿¼ë¦¬ (useQueries)</h3>

                <p>ë Œë”ë§ë§ˆë‹¤ ì‹¤í–‰í•´ì•¼ í•˜ëŠ” ì¿¼ë¦¬ì˜ ê°œìˆ˜ê°€ ë³€ê²½ë˜ëŠ” ê²½ìš°, í›…ì˜ ê·œì¹™ì„ ìœ„ë°˜í•˜ê²Œ ë˜ë¯€ë¡œ ìˆ˜ë™ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ëŒ€ì‹  TanStack QueryëŠ” useQueries í›…ì„ ì œê³µí•˜ì—¬, ì›í•˜ëŠ” ë§Œí¼ì˜ ì¿¼ë¦¬ë¥¼ ë™ì ìœ¼ë¡œ ë³‘ë ¬ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.</p>

                <p>useQueriesëŠ” queries í‚¤ë¥¼ ê°€ì§„ ì˜µì…˜ ê°ì²´ë¥¼ ë°›ìœ¼ë©°, ì´ í‚¤ì˜ ê°’ì€ ì¿¼ë¦¬ ê°ì²´ì˜ ë°°ì—´ì…ë‹ˆë‹¤. ì¿¼ë¦¬ ê²°ê³¼ì˜ ë°°ì—´ì„ ë°˜í™˜í•©ë‹ˆë‹¤:</p>

                <div class="code-block">
                    <pre>function App({ users }) {
  const userQueries = useQueries({
    queries: users.map((user) =&gt; {
      return {
        queryKey: ['user', user.id],
        queryFn: () =&gt; fetchUserById(user.id),
      }
    }),
  })
}</pre>
                </div>
            </div>

            <!-- Section 2: Dependent Queries -->
            <div class="section" id="dependent-queries">
                <h2>2. ì¢…ì† ì¿¼ë¦¬ (Dependent Queries)</h2>
                
                <p>ì¢…ì†(ë˜ëŠ” ì§ë ¬) ì¿¼ë¦¬ëŠ” ì´ì „ ì¿¼ë¦¬ê°€ ì™„ë£Œëœ í›„ì— ì‹¤í–‰ë˜ëŠ” ì¿¼ë¦¬ì…ë‹ˆë‹¤. ì´ë¥¼ êµ¬í˜„í•˜ë ¤ë©´ enabled ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ ì¿¼ë¦¬ê°€ ì–¸ì œ ì‹¤í–‰ë  ì¤€ë¹„ê°€ ë˜ì—ˆëŠ”ì§€ ì•Œë ¤ì£¼ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤:</p>

                <div class="code-block">
                    <pre>// ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
const { data: user } = useQuery({
  queryKey: ['user', email],
  queryFn: getUserByEmail,
})

const userId = user?.id

// ê·¸ ë‹¤ìŒ ì‚¬ìš©ìì˜ í”„ë¡œì íŠ¸ ê°€ì ¸ì˜¤ê¸°
const {
  status,
  fetchStatus,
  data: projects,
} = useQuery({
  queryKey: ['projects', userId],
  queryFn: getProjectsByUser,
  // userIdê°€ ì¡´ì¬í•  ë•Œê¹Œì§€ ì¿¼ë¦¬ê°€ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤
  enabled: !!userId,
})</pre>
                </div>

                <h3>ì¿¼ë¦¬ ìƒíƒœ ë³€í™”</h3>

                <p>projects ì¿¼ë¦¬ëŠ” ë‹¤ìŒ ìƒíƒœë¡œ ì‹œì‘ë©ë‹ˆë‹¤:</p>

                <div class="code-block">
                    <pre>status: 'pending'
isPending: true
fetchStatus: 'idle'</pre>
                </div>

                <p>userë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¦‰ì‹œ projects ì¿¼ë¦¬ê°€ í™œì„±í™”ë˜ê³  ë‹¤ìŒ ìƒíƒœë¡œ ì „í™˜ë©ë‹ˆë‹¤:</p>

                <div class="code-block">
                    <pre>status: 'pending'
isPending: true
fetchStatus: 'fetching'</pre>
                </div>

                <p>projectsë¥¼ ê°€ì ¸ì˜¤ë©´ ë‹¤ìŒ ìƒíƒœê°€ ë©ë‹ˆë‹¤:</p>

                <div class="code-block">
                    <pre>status: 'success'
isPending: false
fetchStatus: 'idle'</pre>
                </div>

                <h3>ë™ì  ë³‘ë ¬ ì¿¼ë¦¬ì™€ì˜ ì¡°í•©</h3>

                <p>useQueriesë„ ì´ì „ ì¿¼ë¦¬ì— ì¢…ì†ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒì€ ì´ë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤:</p>

                <div class="code-block">
                    <pre>// ì‚¬ìš©ì ID ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
const { data: userIds } = useQuery({
  queryKey: ['users'],
  queryFn: getUsersData,
  select: (users) =&gt; users.map((user) =&gt; user.id),
})

// ê·¸ ë‹¤ìŒ ì‚¬ìš©ìë“¤ì˜ ë©”ì‹œì§€ ê°€ì ¸ì˜¤ê¸°
const usersMessages = useQueries({
  queries: userIds
    ? userIds.map((id) =&gt; {
        return {
          queryKey: ['messages', id],
          queryFn: () =&gt; getMessagesByUsers(id),
        }
      })
    : [], // userIdsê°€ undefinedë©´ ë¹ˆ ë°°ì—´ì´ ë°˜í™˜ë©ë‹ˆë‹¤
})</pre>
                </div>

                <div class="warning-box">
                    <strong>âš ï¸ ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­:</strong>
                    <p>ì¢…ì† ì¿¼ë¦¬ëŠ” ì •ì˜ìƒ ìš”ì²­ ì›Œí„°í´(request waterfall)ì˜ í•œ í˜•íƒœë¥¼ êµ¬ì„±í•˜ë©°, ì´ëŠ” ì„±ëŠ¥ì— í•´ë¡œìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‘ ì¿¼ë¦¬ê°€ ë™ì¼í•œ ì‹œê°„ì´ ê±¸ë¦°ë‹¤ê³  ê°€ì •í•˜ë©´, ë³‘ë ¬ë¡œ ì‹¤í–‰í•˜ëŠ” ëŒ€ì‹  ì§ë ¬ë¡œ ì‹¤í–‰í•˜ë©´ í•­ìƒ ë‘ ë°°ì˜ ì‹œê°„ì´ ê±¸ë¦½ë‹ˆë‹¤. íŠ¹íˆ ì§€ì—° ì‹œê°„ì´ ê¸´ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë°œìƒí•  ë•Œ ë”ìš± í•´ë¡­ìŠµë‹ˆë‹¤. ê°€ëŠ¥í•˜ë‹¤ë©´, ë‘ ì¿¼ë¦¬ë¥¼ ë³‘ë ¬ë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ ë°±ì—”ë“œ APIë¥¼ ì¬êµ¬ì„±í•˜ëŠ” ê²ƒì´ í•­ìƒ ë” ì¢‹ì§€ë§Œ, í•­ìƒ ì‹¤ìš©ì ìœ¼ë¡œ ê°€ëŠ¥í•œ ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤.</p>
                    <p>ìœ„ì˜ ì˜ˆì—ì„œ getUserByEmailì„ ë¨¼ì € ê°€ì ¸ì˜¨ ë‹¤ìŒ getProjectsByUserë¥¼ ê°€ì ¸ì˜¤ëŠ” ëŒ€ì‹ , getProjectsByUserEmailì´ë¼ëŠ” ìƒˆë¡œìš´ ì¿¼ë¦¬ë¥¼ ë„ì…í•˜ë©´ ì›Œí„°í´ì„ í‰í‰í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                </div>
            </div>

            <!-- Section 3: Background Fetching Indicators -->
            <div class="section" id="background-fetching">
                <h2>3. ë°±ê·¸ë¼ìš´ë“œ í˜ì¹­ ì¸ë””ì¼€ì´í„°</h2>
                
                <p>ì¿¼ë¦¬ì˜ status === 'pending' ìƒíƒœëŠ” ì´ˆê¸° í•˜ë“œ ë¡œë”© ìƒíƒœë¥¼ í‘œì‹œí•˜ê¸°ì— ì¶©ë¶„í•˜ì§€ë§Œ, ë•Œë•Œë¡œ ì¿¼ë¦¬ê°€ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ë¦¬í˜ì¹­ë˜ê³  ìˆë‹¤ëŠ” ì¶”ê°€ ì¸ë””ì¼€ì´í„°ë¥¼ í‘œì‹œí•˜ê³  ì‹¶ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ ì¿¼ë¦¬ëŠ” status ë³€ìˆ˜ì˜ ìƒíƒœì™€ ê´€ê³„ì—†ì´ í˜ì¹­ ìƒíƒœì„ì„ ë‚˜íƒ€ë‚´ëŠ” isFetching ë¶ˆë¦¬ì–¸ ê°’ë„ ì œê³µí•©ë‹ˆë‹¤:</p>

                <div class="code-block">
                    <pre>function Todos() {
  const {
    status,
    data: todos,
    error,
    isFetching,
  } = useQuery({
    queryKey: ['todos'],
    queryFn: fetchTodos,
  })

  return status === 'pending' ? (
    &lt;span&gt;Loading...&lt;/span&gt;
  ) : status === 'error' ? (
    &lt;span&gt;Error: {error.message}&lt;/span&gt;
  ) : (
    &lt;&gt;
      {isFetching ? &lt;div&gt;Refreshing...&lt;/div&gt; : null}

      &lt;div&gt;
        {todos.map((todo) =&gt; (
          &lt;Todo todo={todo} /&gt;
        ))}
      &lt;/div&gt;
    &lt;/&gt;
  )
}</pre>
                </div>

                <h3>ì „ì—­ ë°±ê·¸ë¼ìš´ë“œ í˜ì¹­ ì¸ë””ì¼€ì´í„°</h3>

                <p>ê°œë³„ ì¿¼ë¦¬ ë¡œë”© ìƒíƒœ ì™¸ì—ë„, ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì–´ë–¤ ì¿¼ë¦¬ë¼ë„ í˜ì¹­ ì¤‘ì¼ ë•Œ ì „ì—­ ë¡œë”© ì¸ë””ì¼€ì´í„°ë¥¼ í‘œì‹œí•˜ê³  ì‹¶ë‹¤ë©´ useIsFetching í›…ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>

                <div class="code-block">
                    <pre>import { useIsFetching } from '@tanstack/react-query'

function GlobalLoadingIndicator() {
  const isFetching = useIsFetching()

  return isFetching ? (
    &lt;div&gt;Queries are fetching in the background...&lt;/div&gt;
  ) : null
}</pre>
                </div>
            </div>

            <!-- Section 4: Window Focus Refetching -->
            <div class="section" id="window-focus">
                <h2>4. ìœˆë„ìš° í¬ì»¤ìŠ¤ ë¦¬í˜ì¹­</h2>
                
                <p>ì‚¬ìš©ìê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë– ë‚¬ë‹¤ê°€ ëŒì•„ì™”ì„ ë•Œ ì¿¼ë¦¬ ë°ì´í„°ê°€ ì˜¤ë˜ëœ ê²½ìš°, TanStack QueryëŠ” ë°±ê·¸ë¼ìš´ë“œì—ì„œ ìë™ìœ¼ë¡œ ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤. refetchOnWindowFocus ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ ì „ì—­ì ìœ¼ë¡œ ë˜ëŠ” ì¿¼ë¦¬ë³„ë¡œ ì´ ê¸°ëŠ¥ì„ ë¹„í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>

                <h3>ì „ì—­ ì„¤ì •</h3>

                <div class="code-block">
                    <pre>const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      refetchOnWindowFocus: false, // ê¸°ë³¸ê°’: true
    },
  },
})

function App() {
  return &lt;QueryClientProvider client={queryClient}&gt;...&lt;/QueryClientProvider&gt;
}</pre>
                </div>

                <h3>ì¿¼ë¦¬ë³„ ì„¤ì •</h3>

                <div class="code-block">
                    <pre>useQuery({
  queryKey: ['todos'],
  queryFn: fetchTodos,
  refetchOnWindowFocus: false,
})</pre>
                </div>

                <h3>ì»¤ìŠ¤í…€ ìœˆë„ìš° í¬ì»¤ìŠ¤ ì´ë²¤íŠ¸</h3>

                <p>ë“œë¬¸ ê²½ìš°ì§€ë§Œ, TanStack Queryê°€ ì¬ê²€ì¦ì„ íŠ¸ë¦¬ê±°í•˜ëŠ” ìì²´ ìœˆë„ìš° í¬ì»¤ìŠ¤ ì´ë²¤íŠ¸ë¥¼ ê´€ë¦¬í•˜ê³  ì‹¶ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ TanStack QueryëŠ” focusManager.setEventListener í•¨ìˆ˜ë¥¼ ì œê³µí•˜ë©°, ì´ í•¨ìˆ˜ëŠ” ìœˆë„ìš°ê°€ í¬ì»¤ìŠ¤ë  ë•Œ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ëŠ” ì½œë°±ì„ ì œê³µí•˜ê³  ìì²´ ì´ë²¤íŠ¸ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ë‹¤ìŒì€ ê¸°ë³¸ í•¸ë“¤ëŸ¬ì˜ ì˜ˆì…ë‹ˆë‹¤:</p>

                <div class="code-block">
                    <pre>focusManager.setEventListener((handleFocus) =&gt; {
  // visibilitychange ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë‹
  if (typeof window !== 'undefined' &amp;&amp; window.addEventListener) {
    const visibilitychangeHandler = () =&gt; {
      handleFocus(document.visibilityState === 'visible')
    }
    
    window.addEventListener('visibilitychange', visibilitychangeHandler, false)
    
    return () =&gt; {
      // ìƒˆ í•¸ë“¤ëŸ¬ê°€ ì„¤ì •ë˜ë©´ ë°˜ë“œì‹œ êµ¬ë… ì·¨ì†Œ
      window.removeEventListener('visibilitychange', visibilitychangeHandler)
    }
  }
})</pre>
                </div>

                <h3>React Nativeì—ì„œì˜ í¬ì»¤ìŠ¤ ê´€ë¦¬</h3>

                <p>React NativeëŠ” windowì˜ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ëŒ€ì‹  AppState ëª¨ë“ˆì„ í†µí•´ í¬ì»¤ìŠ¤ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤. AppStateì˜ "change" ì´ë²¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•± ìƒíƒœê°€ "active"ë¡œ ë³€ê²½ë  ë•Œ ì—…ë°ì´íŠ¸ë¥¼ íŠ¸ë¦¬ê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>

                <div class="code-block">
                    <pre>import { AppState } from 'react-native'
import { focusManager } from '@tanstack/react-query'

function onAppStateChange(status: AppStateStatus) {
  if (Platform.OS !== 'web') {
    focusManager.setFocused(status === 'active')
  }
}

useEffect(() =&gt; {
  const subscription = AppState.addEventListener('change', onAppStateChange)
  
  return () =&gt; subscription.remove()
}, [])</pre>
                </div>

                <h3>í¬ì»¤ìŠ¤ ìƒíƒœ ìˆ˜ë™ ê´€ë¦¬</h3>

                <div class="code-block">
                    <pre>import { focusManager } from '@tanstack/react-query'

// ê¸°ë³¸ í¬ì»¤ìŠ¤ ìƒíƒœ ì¬ì •ì˜
focusManager.setFocused(true)

// ê¸°ë³¸ í¬ì»¤ìŠ¤ ì²´í¬ë¡œ í´ë°±
focusManager.setFocused(undefined)</pre>
                </div>
            </div>

            <!-- Section 5: Disabling/Pausing Queries -->
            <div class="section" id="disabling-queries">
                <h2>5. ì¿¼ë¦¬ ë¹„í™œì„±í™”/ì¼ì‹œì •ì§€</h2>
                
                <p>ì¿¼ë¦¬ê°€ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ì•Šë„ë¡ ë¹„í™œì„±í™”í•˜ê³  ì‹¶ë‹¤ë©´ enabled = false ì˜µì…˜ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. enabled ì˜µì…˜ì€ ë¶ˆë¦¬ì–¸ ê°’ì„ ë°˜í™˜í•˜ëŠ” ì½œë°±ë„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

                <h3>enabledê°€ falseì¼ ë•Œì˜ ë™ì‘:</h3>

                <ul class="feature-list">
                    <li>ì¿¼ë¦¬ì— ìºì‹œëœ ë°ì´í„°ê°€ ìˆìœ¼ë©´ status === 'success' ë˜ëŠ” isSuccess ìƒíƒœë¡œ ì´ˆê¸°í™”ë©ë‹ˆë‹¤</li>
                    <li>ì¿¼ë¦¬ì— ìºì‹œëœ ë°ì´í„°ê°€ ì—†ìœ¼ë©´ status === 'pending' ë° fetchStatus === 'idle' ìƒíƒœë¡œ ì‹œì‘ë©ë‹ˆë‹¤</li>
                    <li>ì¿¼ë¦¬ê°€ ë§ˆìš´íŠ¸ ì‹œ ìë™ìœ¼ë¡œ ê°€ì ¸ì˜¤ì§€ ì•ŠìŠµë‹ˆë‹¤</li>
                    <li>ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì¿¼ë¦¬ê°€ ìë™ìœ¼ë¡œ ë‹¤ì‹œ ê°€ì ¸ì˜¤ì§€ ì•ŠìŠµë‹ˆë‹¤</li>
                    <li>ì¿¼ë¦¬ê°€ ì¼ë°˜ì ìœ¼ë¡œ ìë™ ë¦¬í˜ì¹­ì„ íŠ¸ë¦¬ê±°í•˜ëŠ” ì¿¼ë¦¬ ì¸ìŠ¤í„´ìŠ¤ì˜ ìƒˆ ì¸ìŠ¤í„´ìŠ¤ê°€ ë§ˆìš´íŠ¸ë  ë•Œ ë¬´ì‹œë©ë‹ˆë‹¤</li>
                    <li>refetch í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ìˆ˜ë™ìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ íŠ¸ë¦¬ê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
                </ul>

                <div class="info-box">
                    <strong>ğŸ’¡ TypeScript ì‚¬ìš©ì:</strong>
                    <p>enabled = false ëŒ€ì‹  skipTokenì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì„ í˜¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                </div>

                <div class="code-block">
                    <pre>function Todos() {
  const { isLoading, isError, data, error, refetch, isFetching } = useQuery({
    queryKey: ['todos'],
    queryFn: fetchTodoList,
    enabled: false,
  })

  return (
    &lt;div&gt;
      &lt;button onClick={() =&gt; refetch()}&gt;Fetch Todos&lt;/button&gt;

      {data ? (
        &lt;ul&gt;
          {data.map((todo) =&gt; (
            &lt;li key={todo.id}&gt;{todo.title}&lt;/li&gt;
          ))}
        &lt;/ul&gt;
      ) : isError ? (
        &lt;span&gt;Error: {error.message}&lt;/span&gt;
      ) : isLoading ? (
        &lt;span&gt;Loading...&lt;/span&gt;
      ) : (
        &lt;span&gt;Not ready ...&lt;/span&gt;
      )}

      &lt;div&gt;{isFetching ? 'Fetching...' : null}&lt;/div&gt;
    &lt;/div&gt;
  )
}</pre>
                </div>

                <h3>Lazy ì¿¼ë¦¬</h3>

                <p>enabled ì˜µì…˜ì€ ì¿¼ë¦¬ë¥¼ ì˜êµ¬ì ìœ¼ë¡œ ë¹„í™œì„±í™”í•˜ëŠ” ê²ƒë¿ë§Œ ì•„ë‹ˆë¼ ë‚˜ì¤‘ì— í™œì„±í™”/ë¹„í™œì„±í™”í•˜ëŠ” ë°ì—ë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¢‹ì€ ì˜ˆëŠ” ì‚¬ìš©ìê°€ í•„í„° ê°’ì„ ì…ë ¥í•œ í›„ì—ë§Œ ì²« ë²ˆì§¸ ìš”ì²­ì„ ì‹¤í–‰í•˜ê³  ì‹¶ì€ í•„í„° í¼ì…ë‹ˆë‹¤:</p>

                <div class="code-block">
                    <pre>function Todos() {
  const [filter, setFilter] = React.useState('')

  const { data } = useQuery({
    queryKey: ['todos', filter],
    queryFn: () =&gt; fetchTodos(filter),
    // í•„í„°ê°€ ë¹„ì–´ìˆëŠ” ë™ì•ˆ ë¹„í™œì„±í™”
    enabled: !!filter,
  })

  return (
    &lt;div&gt;
      {/* í•„í„°ë¥¼ ì ìš©í•˜ë©´ ì¿¼ë¦¬ê°€ í™œì„±í™”ë˜ê³  ì‹¤í–‰ë©ë‹ˆë‹¤ */}
      &lt;FiltersForm onApply={setFilter} /&gt;
      {data &amp;&amp; &lt;TodosTable data={data} /&gt;}
    &lt;/div&gt;
  )
}</pre>
                </div>

                <div class="warning-box">
                    <strong>âš ï¸ ì£¼ì˜ì‚¬í•­:</strong>
                    <p>Lazy ì¿¼ë¦¬ëŠ” ì‹œì‘ë¶€í„° status: 'pending' ìƒíƒœê°€ ë©ë‹ˆë‹¤. pendingì€ ì•„ì§ ë°ì´í„°ê°€ ì—†ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ê¸°ìˆ ì ìœ¼ë¡œ ì‚¬ì‹¤ì´ì§€ë§Œ, í˜„ì¬ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³  ìˆì§€ ì•Šìœ¼ë¯€ë¡œ(ì¿¼ë¦¬ê°€ í™œì„±í™”ë˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ) ì´ í”Œë˜ê·¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œë”© ìŠ¤í”¼ë„ˆë¥¼ í‘œì‹œí•  ìˆ˜ ì—†ì„ ê²ƒì…ë‹ˆë‹¤.</p>
                    <p>ë¹„í™œì„±í™”ëœ ì¿¼ë¦¬ë‚˜ lazy ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ëŒ€ì‹  isLoading í”Œë˜ê·¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ê³„ì‚°ë˜ëŠ” íŒŒìƒ í”Œë˜ê·¸ì…ë‹ˆë‹¤: isPending &amp;&amp; isFetching</p>
                </div>

                <h3>TypeScriptì—ì„œ skipToken ì‚¬ìš©</h3>

                <p>TypeScriptë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° skipTokenì„ ì‚¬ìš©í•˜ì—¬ ì¿¼ë¦¬ë¥¼ ë¹„í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì¡°ê±´ì— ë”°ë¼ ì¿¼ë¦¬ë¥¼ ë¹„í™œì„±í™”í•˜ê³  ì‹¶ì§€ë§Œ ì¿¼ë¦¬ê°€ íƒ€ì… ì•ˆì „í•˜ë„ë¡ ìœ ì§€í•˜ê³  ì‹¶ì„ ë•Œ ìœ ìš©í•©ë‹ˆë‹¤.</p>

                <div class="highlight">
                    <strong>ì¤‘ìš”:</strong> useQueryì˜ refetchëŠ” skipTokenê³¼ í•¨ê»˜ ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê·¸ ì™¸ì—ëŠ” skipTokenì´ enabled: falseì™€ ë™ì¼í•˜ê²Œ ì‘ë™í•©ë‹ˆë‹¤.
                </div>

                <div class="code-block">
                    <pre>import { skipToken, useQuery } from '@tanstack/react-query'

function Todos() {
  const [filter, setFilter] = React.useState&lt;string | undefined&gt;()

  const { data } = useQuery({
    queryKey: ['todos', filter],
    // í•„í„°ê°€ undefinedì´ê±°ë‚˜ ë¹„ì–´ìˆëŠ” ë™ì•ˆ ë¹„í™œì„±í™”
    queryFn: filter ? () =&gt; fetchTodos(filter) : skipToken,
  })

  return (
    &lt;div&gt;
      {/* í•„í„°ë¥¼ ì ìš©í•˜ë©´ ì¿¼ë¦¬ê°€ í™œì„±í™”ë˜ê³  ì‹¤í–‰ë©ë‹ˆë‹¤ */}
      &lt;FiltersForm onApply={setFilter} /&gt;
      {data &amp;&amp; &lt;TodosTable data={data} /&gt;}
    &lt;/div&gt;
  )
}</pre>
                </div>
            </div>

            <!-- Section 6: Query Retries -->
            <div class="section" id="query-retries">
                <h2>6. ì¿¼ë¦¬ ì¬ì‹œë„ (Query Retries)</h2>
                
                <p>useQuery ì¿¼ë¦¬ê°€ ì‹¤íŒ¨í•˜ë©´(ì¿¼ë¦¬ í•¨ìˆ˜ê°€ ì—ëŸ¬ë¥¼ ë˜ì§€ë©´), TanStack QueryëŠ” í•´ë‹¹ ì¿¼ë¦¬ì˜ ìš”ì²­ì´ ìµœëŒ€ ì—°ì† ì¬ì‹œë„ íšŸìˆ˜(ê¸°ë³¸ê°’ 3íšŒ)ì— ë„ë‹¬í•˜ì§€ ì•Šì•˜ê±°ë‚˜ ì¬ì‹œë„ í—ˆìš© ì—¬ë¶€ë¥¼ ê²°ì •í•˜ëŠ” í•¨ìˆ˜ê°€ ì œê³µëœ ê²½ìš° ìë™ìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ì¬ì‹œë„í•©ë‹ˆë‹¤.</p>

                <p>ì¬ì‹œë„ëŠ” ì „ì—­ ìˆ˜ì¤€ê³¼ ê°œë³„ ì¿¼ë¦¬ ìˆ˜ì¤€ ëª¨ë‘ì—ì„œ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

                <div class="info-box">
                    <strong>ğŸ’¡ ì„œë²„ì—ì„œì˜ ê¸°ë³¸ê°’:</strong>
                    <p>ì„œë²„ì—ì„œëŠ” ì„œë²„ ë Œë”ë§ì„ ê°€ëŠ¥í•œ í•œ ë¹ ë¥´ê²Œ ë§Œë“¤ê¸° ìœ„í•´ ì¬ì‹œë„ê°€ ê¸°ë³¸ê°’ 0ìœ¼ë¡œ ì„¤ì •ë©ë‹ˆë‹¤.</p>
                </div>

                <div class="code-block">
                    <pre>import { useQuery } from '@tanstack/react-query'

// íŠ¹ì • ì¿¼ë¦¬ê°€ íŠ¹ì • íšŸìˆ˜ë§Œí¼ ì¬ì‹œë„í•˜ë„ë¡ ì„¤ì •
const result = useQuery({
  queryKey: ['todos', 1],
  queryFn: fetchTodoListPage,
  retry: 10, // ì—ëŸ¬ë¥¼ í‘œì‹œí•˜ê¸° ì „ì— ì‹¤íŒ¨í•œ ìš”ì²­ì„ 10ë²ˆ ì¬ì‹œë„í•©ë‹ˆë‹¤
})</pre>
                </div>

                <div class="highlight">
                    <strong>ì •ë³´:</strong> error ì†ì„±ì˜ ë‚´ìš©ì€ ë§ˆì§€ë§‰ ì¬ì‹œë„ ì‹œë„ê¹Œì§€ useQueryì˜ failureReason ì‘ë‹µ ì†ì„±ì˜ ì¼ë¶€ê°€ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ ìœ„ ì˜ˆì œì—ì„œ ì—ëŸ¬ ë‚´ìš©ì€ ì²˜ìŒ 9ë²ˆì˜ ì¬ì‹œë„ ì‹œë„ ë™ì•ˆ(ì´ 10ë²ˆ ì‹œë„) failureReason ì†ì„±ì˜ ì¼ë¶€ê°€ ë˜ë©°, ëª¨ë“  ì¬ì‹œë„ ì‹œë„ í›„ì—ë„ ì—ëŸ¬ê°€ ì§€ì†ë˜ë©´ ë§ˆì§€ë§‰ ì‹œë„ í›„ì— error ì†ì„±ì˜ ì¼ë¶€ê°€ ë©ë‹ˆë‹¤.
                </div>

                <h3>ì¬ì‹œë„ ì§€ì—°</h3>

                <p>ê¸°ë³¸ì ìœ¼ë¡œ TanStack Queryì˜ ì¬ì‹œë„ëŠ” ìš”ì²­ì´ ì‹¤íŒ¨í•œ ì§í›„ì— ì¦‰ì‹œ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í‘œì¤€ì ìœ¼ë¡œ ë°±ì˜¤í”„ ì§€ì—°ì´ ê° ì¬ì‹œë„ ì‹œë„ì— ì ì§„ì ìœ¼ë¡œ ì ìš©ë©ë‹ˆë‹¤.</p>

                <p>ê¸°ë³¸ retryDelayëŠ” ê° ì‹œë„ë§ˆë‹¤ ë‘ ë°°ë¡œ ì¦ê°€í•˜ë„ë¡ ì„¤ì •ë˜ì–´ ìˆì§€ë§Œ(1000msë¶€í„° ì‹œì‘), 30ì´ˆë¥¼ ì´ˆê³¼í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤:</p>

                <div class="code-block">
                    <pre>// ëª¨ë“  ì¿¼ë¦¬ì— ëŒ€í•œ êµ¬ì„±
import {
  QueryCache,
  QueryClient,
  QueryClientProvider,
} from '@tanstack/react-query'

const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      retryDelay: (attemptIndex) =&gt; Math.min(1000 * 2 ** attemptIndex, 30000),
    },
  },
})

function App() {
  return &lt;QueryClientProvider client={queryClient}&gt;...&lt;/QueryClientProvider&gt;
}</pre>
                </div>

                <p>ê¶Œì¥ë˜ì§€ëŠ” ì•Šì§€ë§Œ, Providerì™€ ê°œë³„ ì¿¼ë¦¬ ì˜µì…˜ ëª¨ë‘ì—ì„œ retryDelay í•¨ìˆ˜/ì •ìˆ˜ë¥¼ ì¬ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì •ìˆ˜ë¡œ ì„¤ì •í•˜ë©´ ì¬ì‹œë„ íšŸìˆ˜ì— ê´€ê³„ì—†ì´ ì§€ì—° ì‹œê°„ì´ í•­ìƒ ë™ì¼í•©ë‹ˆë‹¤:</p>

                <div class="code-block">
                    <pre>const result = useQuery({
  queryKey: ['todos'],
  queryFn: fetchTodoList,
  retryDelay: 1000, // ì¬ì‹œë„ íšŸìˆ˜ì— ê´€ê³„ì—†ì´ í•­ìƒ 1000msë¥¼ ëŒ€ê¸°í•©ë‹ˆë‹¤
})</pre>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p><strong>TanStack Query ê°€ì´ë“œ ëª¨ìŒ</strong> - í•œê¸€ ë²ˆì—­</p>
            <p>ì›ë¬¸ ì¶œì²˜:</p>
            <p>
                <a href="https://tanstack.com/query/latest/docs/framework/react/guides/parallel-queries" target="_blank">Parallel Queries</a> | 
                <a href="https://tanstack.com/query/latest/docs/framework/react/guides/dependent-queries" target="_blank">Dependent Queries</a> | 
                <a href="https://tanstack.com/query/latest/docs/framework/react/guides/background-fetching-indicators" target="_blank">Background Fetching</a>
            </p>
            <p>
                <a href="https://tanstack.com/query/latest/docs/framework/react/guides/window-focus-refetching" target="_blank">Window Focus Refetching</a> | 
                <a href="https://tanstack.com/query/latest/docs/framework/react/guides/disabling-queries" target="_blank">Disabling Queries</a> | 
                <a href="https://tanstack.com/query/latest/docs/framework/react/guides/query-retries" target="_blank">Query Retries</a>
            </p>
            <p style="margin-top: 20px; color: #999;">ë²ˆì—­ ë° ì œì‘: Claude AI</p>
        </div>
    </div>
</body>
</html>